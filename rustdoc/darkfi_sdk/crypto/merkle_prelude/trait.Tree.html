<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A Merkle tree that supports incremental appends, witnessing of leaf nodes, checkpoints and rollbacks."><meta name="keywords" content="rust, rustlang, rust-lang, Tree"><title>Tree in darkfi_sdk::crypto::merkle_prelude - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../normalize.css"><link rel="stylesheet" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../ayu.css" disabled><link rel="stylesheet" href="../../../dark.css" disabled><link rel="stylesheet" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../darkfi_sdk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../darkfi_sdk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Tree</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.append">append</a></li><li><a href="#tymethod.authentication_path">authentication_path</a></li><li><a href="#tymethod.checkpoint">checkpoint</a></li><li><a href="#tymethod.current_leaf">current_leaf</a></li><li><a href="#tymethod.current_position">current_position</a></li><li><a href="#tymethod.garbage_collect">garbage_collect</a></li><li><a href="#tymethod.get_witnessed_leaf">get_witnessed_leaf</a></li><li><a href="#tymethod.remove_witness">remove_witness</a></li><li><a href="#tymethod.rewind">rewind</a></li><li><a href="#tymethod.root">root</a></li><li><a href="#tymethod.witness">witness</a></li><li><a href="#tymethod.witnessed_positions">witnessed_positions</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In darkfi_sdk::crypto::merkle_prelude</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Trait <a href="../../index.html">darkfi_sdk</a>::<wbr><a href="../index.html">crypto</a>::<wbr><a href="index.html">merkle_prelude</a>::<wbr><a class="trait" href="#">Tree</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="item-decl"><pre class="rust trait"><code>pub trait Tree&lt;H&gt; {
    fn <a href="#tymethod.append" class="fnname">append</a>(&amp;mut self, value: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.reference.html">&amp;</a>H) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.current_position" class="fnname">current_position</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.current_leaf" class="fnname">current_leaf</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.reference.html">&amp;</a>H&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_witnessed_leaf" class="fnname">get_witnessed_leaf</a>(&amp;self, position: <a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.reference.html">&amp;</a>H&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.witness" class="fnname">witness</a>(&amp;mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.witnessed_positions" class="fnname">witnessed_positions</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/collections/btree/set/struct.BTreeSet.html" title="struct alloc::collections::btree::set::BTreeSet">BTreeSet</a>&lt;<a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>, <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.root" class="fnname">root</a>(&amp;self, checkpoint_depth: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;H&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.authentication_path" class="fnname">authentication_path</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;position: <a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as_of_root: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.reference.html">&amp;</a>H<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;H, <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.remove_witness" class="fnname">remove_witness</a>(&amp;mut self, position: <a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.checkpoint" class="fnname">checkpoint</a>(&amp;mut self);
<span class="item-spacer"></span>    fn <a href="#tymethod.rewind" class="fnname">rewind</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.garbage_collect" class="fnname">garbage_collect</a>(&amp;mut self);
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A Merkle tree that supports incremental appends, witnessing of
leaf nodes, checkpoints and rollbacks.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.append" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.append" class="fnname">append</a>(&amp;mut self, value: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.reference.html">&amp;</a>H) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Appends a new value to the tree at the next available slot.
Returns true if successful and false if the tree would exceed
the maximum allowed depth.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.current_position" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.current_position" class="fnname">current_position</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the most recently appended leaf value.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.current_leaf" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.current_leaf" class="fnname">current_leaf</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.reference.html">&amp;</a>H&gt;</h4></section></summary><div class="docblock"><p>Returns the most recently appended leaf value.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.get_witnessed_leaf" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.get_witnessed_leaf" class="fnname">get_witnessed_leaf</a>(&amp;self, position: <a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.reference.html">&amp;</a>H&gt;</h4></section></summary><div class="docblock"><p>Returns the leaf at the specified position if the tree can produce
an authentication path for it.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.witness" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.witness" class="fnname">witness</a>(&amp;mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>&gt;</h4></section></summary><div class="docblock"><p>Marks the current leaf as one for which we’re interested in producing
an authentication path. Returns an optional value containing the
current position if successful or if the current value was already
marked, or None if the tree is empty.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.witnessed_positions" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.witnessed_positions" class="fnname">witnessed_positions</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/collections/btree/set/struct.BTreeSet.html" title="struct alloc::collections::btree::set::BTreeSet">BTreeSet</a>&lt;<a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>, <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;</h4></section></summary><div class="docblock"><p>Return a set of all the positions for which we have witnessed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.root" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.root" class="fnname">root</a>(&amp;self, checkpoint_depth: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;H&gt;</h4></section></summary><div class="docblock"><p>Obtains the root of the Merkle tree at the specified checkpoint depth
by hashing against empty nodes up to the maximum height of the tree.
Returns <code>None</code> if there are not enough checkpoints available to reach the
requested checkpoint depth.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.authentication_path" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.authentication_path" class="fnname">authentication_path</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;position: <a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;as_of_root: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.reference.html">&amp;</a>H<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;H, <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Obtains an authentication path to the value at the specified position,
as of the tree state corresponding to the given root.
Returns <code>None</code> if there is no available authentication path to that
position or if the root does not correspond to a checkpointed
root of the tree.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.remove_witness" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.remove_witness" class="fnname">remove_witness</a>(&amp;mut self, position: <a class="struct" href="../struct.MerklePosition.html" title="struct darkfi_sdk::crypto::MerklePosition">Position</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Marks the value at the specified position as a value we’re no longer
interested in maintaining a witness for. Returns true if successful and
false if we were already not maintaining a witness at this position.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.checkpoint" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.checkpoint" class="fnname">checkpoint</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Creates a new checkpoint for the current tree state. It is valid to
have multiple checkpoints for the same tree state, and each <code>rewind</code>
call will remove a single checkpoint.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.rewind" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.rewind" class="fnname">rewind</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Rewinds the tree state to the previous checkpoint, and then removes
that checkpoint record. If there are multiple checkpoints at a given
tree state, the tree state will not be altered until all checkpoints
at that tree state have been removed using <code>rewind</code>. This function
return false and leave the tree unmodified if no checkpoints exist.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.garbage_collect" class="method has-srclink"><h4 class="code-header">fn <a href="#tymethod.garbage_collect" class="fnname">garbage_collect</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Remove state from the tree that no longer needs to be maintained
because it is associated with checkpoints or witnesses that
have been removed from the tree at positions deeper than those
reachable by calls to <code>rewind</code>. It is always safe to implement
this as a no-op operation</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div id="implementors-list"><section id="impl-Tree%3CH%3E-for-BridgeTree%3CH%2C%20DEPTH%3E" class="impl has-srclink"><a href="#impl-Tree%3CH%3E-for-BridgeTree%3CH%2C%20DEPTH%3E" class="anchor"></a><h3 class="code-header">impl&lt;H, const DEPTH:&nbsp;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>&gt; <a class="trait" href="trait.Tree.html" title="trait darkfi_sdk::crypto::merkle_prelude::Tree">Tree</a>&lt;H&gt; for BridgeTree&lt;H, DEPTH&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;H: <a class="trait" href="trait.Hashable.html" title="trait darkfi_sdk::crypto::merkle_prelude::Hashable">Hashable</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,</span></h3></section></div><script src="../../../implementors/incrementalmerkletree/trait.Tree.js" data-ignore-extern-crates="incrementalmerkletree" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="darkfi_sdk" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.1 (90743e729 2023-01-10)" ></div></body></html>