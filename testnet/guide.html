<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The DarkFi Book</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">DarkFi</a></li><li class="chapter-item expanded "><a href="../philosophy/philosophy.html"><strong aria-hidden="true">1.</strong> Philosophy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../philosophy/ideology.html"><strong aria-hidden="true">1.1.</strong> Ideology</a></li><li class="chapter-item expanded "><a href="../philosophy/books.html"><strong aria-hidden="true">1.2.</strong> Books</a></li></ol></li><li class="chapter-item expanded "><a href="../testnet/guide.html" class="active"><strong aria-hidden="true">2.</strong> Start Here: Testnet Guide</a></li><li class="chapter-item expanded "><a href="../development/development.html"><strong aria-hidden="true">3.</strong> Development</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../development/contributing.html"><strong aria-hidden="true">3.1.</strong> Contributing</a></li><li class="chapter-item expanded "><a href="../development/rustdoc.html"><strong aria-hidden="true">3.2.</strong> API Rustdoc</a></li></ol></li><li class="chapter-item expanded "><a href="../architecture/architecture.html"><strong aria-hidden="true">4.</strong> Architecture</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../architecture/overview.html"><strong aria-hidden="true">4.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../architecture/anonymous_assets.html"><strong aria-hidden="true">4.2.</strong> Anonymous assets</a></li><li class="chapter-item expanded "><a href="../architecture/blockchain.html"><strong aria-hidden="true">4.3.</strong> Blockchain</a></li><li class="chapter-item expanded "><a href="../architecture/consensus.html"><strong aria-hidden="true">4.4.</strong> Consensus</a></li><li class="chapter-item expanded "><a href="../architecture/tx_lifetime.html"><strong aria-hidden="true">4.5.</strong> Transactions</a></li><li class="chapter-item expanded "><a href="../architecture/smart_contracts.html"><strong aria-hidden="true">4.6.</strong> Smart Contracts</a></li><li class="chapter-item expanded "><a href="../architecture/bridge.html"><strong aria-hidden="true">4.7.</strong> Bridge</a></li><li class="chapter-item expanded "><a href="../architecture/tooling.html"><strong aria-hidden="true">4.8.</strong> Tooling</a></li></ol></li><li class="chapter-item expanded "><a href="../zkas/index.html"><strong aria-hidden="true">5.</strong> zkas</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../zkas/bincode.html"><strong aria-hidden="true">5.1.</strong> Bincode</a></li><li class="chapter-item expanded "><a href="../zkas/examples.html"><strong aria-hidden="true">5.2.</strong> Examples</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../zkas/examples/voting.html"><strong aria-hidden="true">5.2.1.</strong> Anonymous voting</a></li><li class="chapter-item expanded "><a href="../zkas/examples/sapling.html"><strong aria-hidden="true">5.2.2.</strong> Anonymous payments</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../crypto/crypto.html"><strong aria-hidden="true">6.</strong> Crypto</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../crypto/fft.html"><strong aria-hidden="true">6.1.</strong> FFT</a></li><li class="chapter-item expanded "><a href="../crypto/zk_explainer.html"><strong aria-hidden="true">6.2.</strong> ZK explainer</a></li><li class="chapter-item expanded "><a href="../crypto/research.html"><strong aria-hidden="true">6.3.</strong> Research</a></li><li class="chapter-item expanded "><a href="../crypto/rln.html"><strong aria-hidden="true">6.4.</strong> Rate-Limit Nullifiers</a></li><li class="chapter-item expanded "><a href="../crypto/reading-maths-books.html"><strong aria-hidden="true">6.5.</strong> Reading maths books</a></li></ol></li><li class="chapter-item expanded "><a href="../learn/dchat/dchat.html"><strong aria-hidden="true">7.</strong> p2p Api Tutorial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/dchat/deployment/part-1.html"><strong aria-hidden="true">7.1.</strong> Deployment</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/dchat/deployment/getting-started.html"><strong aria-hidden="true">7.1.1.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="../learn/dchat/deployment/writing-a-daemon.html"><strong aria-hidden="true">7.1.2.</strong> Writing a daemon</a></li><li class="chapter-item expanded "><a href="../learn/dchat/deployment/sessions.html"><strong aria-hidden="true">7.1.3.</strong> Sessions</a></li><li class="chapter-item expanded "><a href="../learn/dchat/deployment/settings.html"><strong aria-hidden="true">7.1.4.</strong> Settings</a></li><li class="chapter-item expanded "><a href="../learn/dchat/deployment/error-handling.html"><strong aria-hidden="true">7.1.5.</strong> Error handling</a></li><li class="chapter-item expanded "><a href="../learn/dchat/deployment/start-run-stop.html"><strong aria-hidden="true">7.1.6.</strong> Start-Run-Stop</a></li><li class="chapter-item expanded "><a href="../learn/dchat/deployment/seed-node.html"><strong aria-hidden="true">7.1.7.</strong> Seed</a></li><li class="chapter-item expanded "><a href="../learn/dchat/deployment/deploy.html"><strong aria-hidden="true">7.1.8.</strong> Deploy</a></li></ol></li><li class="chapter-item expanded "><a href="../learn/dchat/creating-dchat/part-2.html"><strong aria-hidden="true">7.2.</strong> Creating dchat</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/dchat/creating-dchat/message.html"><strong aria-hidden="true">7.2.1.</strong> Message</a></li><li class="chapter-item expanded "><a href="../learn/dchat/creating-dchat/protocols.html"><strong aria-hidden="true">7.2.2.</strong> Protocols</a></li><li class="chapter-item expanded "><a href="../learn/dchat/creating-dchat/protocol-dchat.html"><strong aria-hidden="true">7.2.3.</strong> ProtocolDchat</a></li><li class="chapter-item expanded "><a href="../learn/dchat/creating-dchat/register-protocol.html"><strong aria-hidden="true">7.2.4.</strong> Register protocol</a></li><li class="chapter-item expanded "><a href="../learn/dchat/creating-dchat/sending-messages.html"><strong aria-hidden="true">7.2.5.</strong> Sending messages</a></li><li class="chapter-item expanded "><a href="../learn/dchat/creating-dchat/ui.html"><strong aria-hidden="true">7.2.6.</strong> Slap on a UI</a></li><li class="chapter-item expanded "><a href="../learn/dchat/creating-dchat/using-dchat.html"><strong aria-hidden="true">7.2.7.</strong> Using dchat</a></li></ol></li><li class="chapter-item expanded "><a href="../learn/dchat/network-tools/part-3.html"><strong aria-hidden="true">7.3.</strong> Net tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/dchat/network-tools/rpc.html"><strong aria-hidden="true">7.3.1.</strong> RPC interface</a></li><li class="chapter-item expanded "><a href="../learn/dchat/network-tools/accept-addr.html"><strong aria-hidden="true">7.3.2.</strong> Accept addr</a></li><li class="chapter-item expanded "><a href="../learn/dchat/network-tools/pong.html"><strong aria-hidden="true">7.3.3.</strong> Adding methods</a></li><li class="chapter-item expanded "><a href="../learn/dchat/network-tools/server.html"><strong aria-hidden="true">7.3.4.</strong> RPC server</a></li><li class="chapter-item expanded "><a href="../learn/dchat/network-tools/get-info.html"><strong aria-hidden="true">7.3.5.</strong> get_info</a></li><li class="chapter-item expanded "><a href="../learn/dchat/network-tools/using-dnetview.html"><strong aria-hidden="true">7.3.6.</strong> Using dnetview</a></li><li class="chapter-item expanded "><a href="../learn/dchat/network-tools/debug.html"><strong aria-hidden="true">7.3.7.</strong> Debugging</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../clients/clients.html"><strong aria-hidden="true">8.</strong> Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../clients/darkfid_jsonrpc.html"><strong aria-hidden="true">8.1.</strong> darkfid JSON-RPC API</a></li><li class="chapter-item expanded "><a href="../clients/cashierd_jsonrpc.html"><strong aria-hidden="true">8.2.</strong> cashierd JSON-RPC API</a></li><li class="chapter-item expanded "><a href="../clients/faucetd_jsonrpc.html"><strong aria-hidden="true">8.3.</strong> faucetd JSON-RPC API</a></li><li class="chapter-item expanded "><a href="../clients/portranges.html"><strong aria-hidden="true">8.4.</strong> Port ranges</a></li></ol></li><li class="chapter-item expanded "><a href="../misc/misc.html"><strong aria-hidden="true">9.</strong> Miscellaneous tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../misc/vanityaddr.html"><strong aria-hidden="true">9.1.</strong> vanityaddr</a></li><li class="chapter-item expanded "><a href="../misc/ircd/ircd.html"><strong aria-hidden="true">9.2.</strong> ircd</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../misc/ircd/specification.html"><strong aria-hidden="true">9.2.1.</strong> Specification</a></li><li class="chapter-item expanded "><a href="../misc/ircd/private_message.html"><strong aria-hidden="true">9.2.2.</strong> Private Message</a></li></ol></li><li class="chapter-item expanded "><a href="../misc/tau.html"><strong aria-hidden="true">9.3.</strong> tau</a></li><li class="chapter-item expanded "><a href="../misc/event_graph/event_graph.html"><strong aria-hidden="true">9.4.</strong> event_graph</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../misc/event_graph/network_protocol.html"><strong aria-hidden="true">9.4.1.</strong> Network Protocol</a></li></ol></li><li class="chapter-item expanded "><a href="../misc/darkwiki.html"><strong aria-hidden="true">9.5.</strong> darkwiki</a></li><li class="chapter-item expanded "><a href="../misc/dnetview.html"><strong aria-hidden="true">9.6.</strong> dnetview</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <!-- Make the book title only appear if it is *not* the chapter title as well -->
                    <h1 id="book-title" class="menu-title">The DarkFi Book</h1>
                    <script type="text/javascript">
                        var bookTitleElement = document.getElementById('book-title')
                        var bookTitle = 'The DarkFi Book';
                        var chapterTitle = 'Start Here: Testnet Guide';
                        if (bookTitle === chapterTitle) {
                            bookTitleElement.innerText = null;
                            document.title = bookTitle;
                        }
                    </script>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="darkfi-testnet-user-guide"><a class="header" href="#darkfi-testnet-user-guide">DarkFi Testnet User Guide</a></h1>
<ul>
<li><a href="#compiling">Compiling</a></li>
<li><a href="#running">Running</a></li>
<li><a href="#airdrops">Airdrops</a></li>
<li><a href="#payments">Payments</a></li>
<li><a href="#atomic-swaps">Atomic Swaps</a></li>
<li><a href="#dao">DAO</a>
<ul>
<li><a href="#minting">Minting</a></li>
<li><a href="#sending-money-to-the-treasury">Sending money to the treasury</a></li>
<li><a href="#creating-a-proposal">Creating a proposal</a></li>
</ul>
</li>
</ul>
<p>This document presents a short user guide for the initial DarkFi
testnet. In it, we cover basic setup of the <code>darkfid</code> node daemon,
initializing a wallet, and interacting with the <em>money contract</em>,
which provides infrastructure for payments and atomic swaps.</p>
<p>Since this is still an early phase, we will not be installing any of
the software system-wide. Instead, we'll be running all the commands
from the git repository, so we're able to easily pull any necessary
updates.</p>
<h2 id="compiling"><a class="header" href="#compiling">Compiling</a></h2>
<p>Refer to the main
<a href="https://github.com/darkrenaissance/darkfi/blob/master/README.md">README</a>
file for instructions on how to install Rust and necessary deps.</p>
<p>Once you have the repository in place, and everything is installed, we
can compile the <code>darkfid</code> node and the <code>drk</code> wallet CLI:</p>
<pre><code>$ make darkfid drk
</code></pre>
<p>This process will now compile the node and the wallet CLI tool.
When finished, we can begin using the network. Run <code>darkfid</code> once so
that it spawns its config file on your system. This config file will
be used by <code>darkfid</code> in order to configure itself. The defaults are
already preset for using the testnet network.</p>
<pre><code>$ ./darkfid
Config file created in &quot;~/.config/darkfi/darkfid_config.toml&quot;. Please review it and try again.
</code></pre>
<h2 id="running"><a class="header" href="#running">Running</a></h2>
<p>Once that's in place, you can run it again and <code>darkfid</code> will start,
create necessary keys for validation of blocks and transactions, and
begin syncing the blockchain. Keep it running, and you should see a
<code>Blockchain is synced!</code> message after some time.</p>
<pre><code>$ ./darkfid
</code></pre>
<p>Now it's time to initialize your wallet. For this we use a separate
wallet CLI which is created to interface with the smart contract used
for payments and swaps.</p>
<p>We simply have to initialize a wallet, and create a keypair:</p>
<pre><code>$ ./drk wallet --initialize
$ ./drk wallet --keygen
</code></pre>
<p>The second command will print out your new DarkFi address where you
can receive payments. Take note of it. Alternatively, you can always
retrieve it using:</p>
<pre><code>$ ./drk wallet --address
</code></pre>
<p>In order to receive incoming coins, you'll need to use the <code>drk</code>
tool to subscribe on <code>darkfid</code> so you can receive notifications for
incoming blocks. The blocks have to be scanned for transactions,
and to find coins that are intended for you. In another terminal,
you can run the following commands to first scan the blockchain,
and then to subscribe to new blocks:</p>
<pre><code>$ ./drk scan
$ ./drk subscribe
</code></pre>
<p>Now you can leave the subscriber running. In case you stop it, just
run <code>drk scan</code> again until the chain is fully scanned, and then you
should be able to subscribe again.</p>
<h2 id="airdrops"><a class="header" href="#airdrops">Airdrops</a></h2>
<p>Now you have your wallet set up. Let's proceed with getting some
tokens from the faucet. The testnet has a running faucet which is
able to airdrop arbitrary tokens. For example purposes, we'll use
the tokens called <code>DARKfZX1utGbz8ZpnvtCH6i46nSDZEEGa5fMnhoubWPq</code> and
<code>BobvfQrDaf32VNhVtX6Adyi3WGfPpPYZPJBn6rnrxHKm</code></p>
<p>So let's airdrop some of these into our wallet:</p>
<pre><code>$ ./drk airdrop 42.69 DARKfZX1utGbz8ZpnvtCH6i46nSDZEEGa5fMnhoubWPq
$ ./drk airdrop 13.37 BobvfQrDaf32VNhVtX6Adyi3WGfPpPYZPJBn6rnrxHKm
</code></pre>
<p>There is a limit of 100 for testnet airdrops currently.</p>
<p>Note: you have wait some minutes between airdrops since they're
rate-limited.</p>
<p>On success, you should see a transaction ID. If successful,
the airdrop transactions will how be in the consensus' mempool,
waiting for inclusion in the next block. Depending on the network,
finalization of the blocks could take some time. You'll have to wait
for this to happen.  If your <code>drk subscribe</code> is running, then after
some time your balance should be in your wallet.</p>
<p><img src="pablo0.jpg" alt="pablo-waiting0" /></p>
<p>You can check your wallet balance using <code>drk</code>:</p>
<pre><code>$ ./drk wallet --balance
</code></pre>
<h2 id="payments"><a class="header" href="#payments">Payments</a></h2>
<p>Using the tokens we got, we can make payments to other addresses. Let's
try to send some <code>DARKfZX1utGbz8ZpnvtCH6i46nSDZEEGa5fMnhoubWPq</code> tokens
to <code>8sRwB7AwBTKEkyTW6oMyRoJWZhJwtqGTf7nyHwuJ74pj</code>:</p>
<pre><code>$ ./drk transfer 2.69 DARKfZX1utGbz8ZpnvtCH6i46nSDZEEGa5fMnhoubWPq \
    8sRwB7AwBTKEkyTW6oMyRoJWZhJwtqGTf7nyHwuJ74pj &gt; payment_tx
</code></pre>
<p>The above command will create a transfer transaction and place it into
the file called <code>payment_tx</code>. Then we can broadcast this transaction
to the network:</p>
<pre><code>$ ./drk broadcast &lt; payment_tx
</code></pre>
<p>On success we'll see a transaction ID. Now again the same finalization
process has to occur and <code>8sRwB7AwBTKEkyTW6oMyRoJWZhJwtqGTf7nyHwuJ74pj</code>
will receive the tokens you've sent.</p>
<p><img src="pablo1.jpg" alt="pablo-waiting1" /></p>
<p>We can see the spent coin in our wallet.</p>
<pre><code>$ ./drk wallet --coins
</code></pre>
<p>We have to wait until the next block to see our change balance reappear
in our wallet.</p>
<pre><code>$ ./drk wallet --balance
</code></pre>
<h2 id="atomic-swaps"><a class="header" href="#atomic-swaps">Atomic Swaps</a></h2>
<p>In order to do an atomic swap with someone, you will
first have to come to consensus on what tokens you wish to
swap. For example purposes, let's say you want to swap <code>40</code>
<code>DARKfZX1utGbz8ZpnvtCH6i46nSDZEEGa5fMnhoubWPq</code> (which is the balance
you should have left over after doing the above payment) for your
counterparty's <code>20</code> <code>AcABG4fnmBuT5vuXV8TLdEV8panhk5SdtBZxCCLqQxyL</code>.</p>
<p>To protect your anonymity from the counterparty, the swap can only
send entire coins. To create a smaller coin denomination, send
yourself the amount you want to swap. Then check you have a spendable
coin to swap with:</p>
<pre><code>$ ./drk wallet --coins
</code></pre>
<p>You'll have to initiate the swap and build your half of the swap tx:</p>
<pre><code>$ ./drk otc init -v 40.0:20.0 \
    -t DARKfZX1utGbz8ZpnvtCH6i46nSDZEEGa5fMnhoubWPq:AcABG4fnmBuT5vuXV8TLdEV8panhk5SdtBZxCCLqQxyL \
    &gt; half_swap
</code></pre>
<p>Then you can send this <code>half_swap</code> file to your counterparty and they
can create the other half by running:</p>
<pre><code>$ ./drk otc join &lt; half_swap &gt; full_swap
</code></pre>
<p>They will sign the full_swap file and send it back to you. Finally,
to make the swap transaction valid, you need so sign it as well,
and broadcast it:</p>
<pre><code>$ ./drk otc sign &lt; full_swap &gt; signed_swap
$ ./drk broadcast &lt; signed_swap
</code></pre>
<p>On success, you should see a transaction ID. This transaction will now
also be in the mempool, so you should wait again until it's finalized.</p>
<p><img src="pablo2.jpg" alt="pablo-waiting2" /></p>
<p>After a while you should see the change in balances in your wallet:</p>
<pre><code>$ ./drk wallet --balance
</code></pre>
<p>If you see your counterparty's tokens, that means the swap was
successful.  In case you still see your old tokens, that could mean
that the swap transaction has not yet been finalized.</p>
<h2 id="dao"><a class="header" href="#dao">DAO</a></h2>
<p>On the testnet, we are also able to create an anonymous DAO. Using
the <code>drk</code> CLI tool, we have a <code>dao</code> subcommand that can perform the
necessary operations. Let's create a DAO with the following parameters:</p>
<ul>
<li>Proposer limit: <code>90</code></li>
<li>Quorum: <code>10</code></li>
<li>Approval ratio: <code>0.67</code></li>
<li>Governance token: <code>A7f1RKsCUUHrSXA7a9ogmwg8p3bs6F47ggsW826HD4yd</code></li>
</ul>
<p>You can see what these parameters mean with the <code>help</code> command.</p>
<pre><code>$ ./drk help dao create
</code></pre>
<p>Lets create our DAO.</p>
<pre><code>$ ./drk dao create 90 10 0.67 A7f1RKsCUUHrSXA7a9ogmwg8p3bs6F47ggsW826HD4yd &gt; dao.dat
$ ./drk dao view &lt; dao.dat
</code></pre>
<p>The view command will show us the parameters. If everything looks fine,
we can now import it into our wallet:</p>
<pre><code>./drk dao import MiladyMakerDAO &lt; dao.dat
./drk dao list
./drk dao list 1
</code></pre>
<h3 id="minting"><a class="header" href="#minting">Minting</a></h3>
<p>If parameters are shown, this means the DAO was successfully imported
into our wallet. The DAO's index in our wallet is <code>1</code>, so we'll use
that to reference it. Now we can create a transaction that will mint
the DAO on-chain, and broadcast it:</p>
<pre><code>./drk dao mint 1 &gt; dao_mint_tx
./drk broadcast &lt; dao_mint_tx
</code></pre>
<p>Now the transaction is broadcasted to the network. Wait for it to
finalize, and if your <code>drk</code> is subscribed, after finalization you
should see a <code>leaf_position</code> and a transaction ID when running
<code>dao list 1</code>.</p>
<h3 id="sending-money-to-the-treasury"><a class="header" href="#sending-money-to-the-treasury">Sending money to the treasury</a></h3>
<p>Let's send some tokens to the DAO's treasury so we're able to make
a proposal to send those somewhere. First find the DAO bulla and the
DAO public key with <code>dao list</code> and then create a transfer transaction:</p>
<pre><code>$ ./drk dao list 1
$ ./drk transfer 10 BNBZ9YprWvEGMYHW4dFvbLuLfHnN9Bs64zuTFQAbw9Dy \
    6BwyxvNut6jrPaQ5YPcMVgM3nhwNxvdFhVT4CwQHwJgN \
    --dao CvnfwNHGLEL42mpjETtWknt7ZEQhoJCACGZ9rVFscFw4 &gt; dao_transfer
$ ./drk broadcast &lt; dao_transfer
</code></pre>
<p>Wait for it to finalize, and if subscribed, you should see the DAO
receive the funds:</p>
<pre><code>$ ./drk dao balance 1
</code></pre>
<h3 id="creating-a-proposal"><a class="header" href="#creating-a-proposal">Creating a proposal</a></h3>
<p>Now that the DAO has something in their treasury, we can create a
proposal to send it somewhere. Let's send 5 of the 10 tokens to our
address (we can find that with <code>drk wallet --address</code>).</p>
<p>Since we chose <code>90</code> as the governance token proposal limit, let's
just airdrop that into our wallet first:</p>
<pre><code>$ ./drk airdrop 90 A7f1RKsCUUHrSXA7a9ogmwg8p3bs6F47ggsW826HD4yd
</code></pre>
<p>Then create the proposal:</p>
<pre><code>$ ./drk dao propose 1 ChgNSmpp6pCstPsvYNNT1686fuj1PPobo1C4qWXubr3r \
    5 BNBZ9YprWvEGMYHW4dFvbLuLfHnN9Bs64zuTFQAbw9Dy &gt; proposal_tx
$ ./drk broadcast &lt; proposal_tx
</code></pre>
<p>Once finalized and scanned, the proposal should be viewable in the
wallet. We can see this with the <code>proposal</code> subcommands:</p>
<pre><code>$ ./drk dao proposals 1
$ ./drk dao proposal 1 1
</code></pre>
<p>NOTE: vote &amp; exec is todo, check src/contract/dao/ for code.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../philosophy/books.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../development/development.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../philosophy/books.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../development/development.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../theme/mermaid.min.js"></script>
        <script type="text/javascript" src="../theme/mermaid-init.js"></script>


    </body>
</html>
